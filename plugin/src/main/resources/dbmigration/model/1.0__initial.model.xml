<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<migration xmlns="http://ebean-orm.github.io/xml/ns/dbmigration">
    <changeSet type="apply">
        <createTable name="rc_player_placed_blocks" pkName="pk_rc_player_placed_blocks">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="world" type="uuid"/>
            <column name="chunk_x" type="integer" notnull="true"/>
            <column name="chunk_z" type="integer" notnull="true"/>
            <column name="x" type="integer" notnull="true"/>
            <column name="y" type="integer" notnull="true"/>
            <column name="z" type="integer" notnull="true"/>
            <column name="timestamp" type="timestamp"/>
        </createTable>
        <createTable name="rc_actionapi" pkName="pk_rc_actionapi">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="action_type" type="varchar"/>
            <column name="name" type="varchar"/>
            <column name="description" type="varchar"/>
            <column name="server" type="varchar"/>
            <column name="conf" type="clob"/>
            <column name="active" type="boolean" defaultValue="false" notnull="true"/>
            <column name="last_active" type="timestamp"/>
        </createTable>
        <createTable name="rc_commands" pkName="pk_rc_commands">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="host" type="varchar"/>
            <column name="base" type="varchar"/>
            <column name="aliases" type="varchar"/>
            <column name="description" type="varchar"/>
            <column name="usage_" type="varchar"/>
            <column name="min" type="integer" notnull="true"/>
            <column name="max" type="integer" notnull="true"/>
            <column name="flags" type="varchar"/>
            <column name="help_" type="TEXT"/>
            <column name="permission" type="varchar"/>
            <column name="server" type="varchar"/>
        </createTable>
        <createTable name="rc_listener" pkName="pk_rc_listener">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="listener" type="varchar"/>
            <column name="plugin" type="varchar"/>
            <column name="last_loaded" type="timestamp"/>
            <column name="server" type="varchar"/>
            <uniqueConstraint name="uq_rc_listener_listener_server" columnNames="listener,server" oneToOne="false"
                              nullableColumns="listener,server"/>
        </createTable>
        <createTable name="rc_log" pkName="pk_rc_log">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="level" type="integer" checkConstraint="check ( level in (0,1,2,3))"
                    checkConstraintName="ck_rc_log_level"/>
            <column name="category" type="varchar"/>
            <column name="log" type="TEXT"/>
            <column name="last" type="timestamp"/>
            <column name="server" type="varchar"/>
        </createTable>
        <createTable name="rc_object_storage" pkName="pk_rc_object_storage">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="storage_name" type="varchar" notnull="true"/>
            <column name="serialization" type="TEXT" notnull="true"/>
        </createTable>
        <createTable name="flight_paths" pkName="pk_flight_paths">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="name" type="varchar" unique="uq_flight_paths_name"/>
            <column name="start_station_id" type="bigint" references="flight_stations.id"
                    foreignKeyName="fk_flight_paths_start_station_id"
                    foreignKeyIndex="ix_flight_paths_start_station_id"/>
            <column name="end_station_id" type="bigint" references="flight_stations.id"
                    foreignKeyName="fk_flight_paths_end_station_id" foreignKeyIndex="ix_flight_paths_end_station_id"/>
            <column name="version" type="bigint" notnull="true"/>
            <column name="when_created" type="timestamp" notnull="true"/>
            <column name="when_modified" type="timestamp" notnull="true"/>
        </createTable>
        <createTable name="raidcraft_peristant_requirements" pkName="pk_raidcraft_peristant_requirements">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="plugin" type="varchar"/>
            <column name="requirement" type="varchar"/>
            <column name="uuid" type="uuid"/>
        </createTable>
        <createTable name="raidcraft_persistant_requirement_mappings"
                     pkName="pk_raidcraft_persistant_requirement_mappings">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="requirement_id" type="integer" references="raidcraft_peristant_requirements.id"
                    foreignKeyName="fk_raidcraft_persistant_requirement_mappings_requirement_id"
                    foreignKeyIndex="ix_raidcraft_persistant_requirement_mappings_requirement_id"/>
            <column name="mapped_key" type="varchar"/>
            <column name="mapped_value" type="varchar"/>
        </createTable>
        <createTable name="rcinv_inventories" pkName="pk_rcinv_inventories">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="title" type="varchar"/>
            <column name="created" type="timestamp"/>
            <column name="last_update" type="timestamp"/>
            <column name="size" type="integer" notnull="true"/>
        </createTable>
        <createTable name="rcinv_slots" pkName="pk_rcinv_slots">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="inventory_id" type="integer" references="rcinv_inventories.id"
                    foreignKeyName="fk_rcinv_slots_inventory_id" foreignKeyIndex="ix_rcinv_slots_inventory_id"/>
            <column name="object_id" type="integer" notnull="true"/>
            <column name="slot" type="integer" notnull="true"/>
        </createTable>
        <createTable name="rc_player_inventories" pkName="pk_rc_player_inventories">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="player" type="uuid" notnull="true"/>
            <column name="inventory_id" type="integer" notnull="true"/>
            <column name="object_helmet" type="integer" notnull="true"/>
            <column name="object_chestplate" type="integer" notnull="true"/>
            <column name="object_leggings" type="integer" notnull="true"/>
            <column name="object_boots" type="integer" notnull="true"/>
            <column name="exp" type="float" notnull="true"/>
            <column name="level" type="integer" notnull="true"/>
            <column name="locked" type="boolean" defaultValue="false" notnull="true"/>
            <column name="created_at" type="timestamp"/>
            <column name="updated_at" type="timestamp"/>
            <column name="version" type="bigint" notnull="true"/>
        </createTable>
        <createTable name="rc_player_logs" pkName="pk_rc_player_logs">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="player" type="uuid"/>
            <column name="name" type="varchar"/>
            <column name="join_time" type="timestamp"/>
            <column name="quit_time" type="timestamp"/>
            <column name="world" type="varchar"/>
        </createTable>
        <createTable name="rc_player_log_stats" pkName="pk_rc_player_log_stats">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="log_id" type="integer" references="rc_player_logs.id"
                    foreignKeyName="fk_rc_player_log_stats_log_id" foreignKeyIndex="ix_rc_player_log_stats_log_id"/>
            <column name="statistic" type="varchar"/>
            <column name="logon_value" type="integer" notnull="true"/>
            <column name="logoff_value" type="integer" notnull="true"/>
        </createTable>
        <createTable name="flight_player_stations" pkName="pk_flight_player_stations">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="station_id" type="bigint" references="flight_stations.id"
                    foreignKeyName="fk_flight_player_stations_station_id"
                    foreignKeyIndex="ix_flight_player_stations_station_id"/>
            <column name="player" type="varchar"/>
            <column name="player_id" type="uuid"/>
            <column name="discovered" type="timestamp"/>
            <column name="version" type="bigint" notnull="true"/>
            <column name="when_created" type="timestamp" notnull="true"/>
            <column name="when_modified" type="timestamp" notnull="true"/>
        </createTable>
        <createTable name="rc_plugin" pkName="pk_rc_plugin">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="name" type="varchar"/>
            <column name="description" type="varchar"/>
            <column name="version" type="varchar"/>
            <column name="author" type="varchar"/>
            <column name="last_active" type="timestamp"/>
        </createTable>
        <createTable name="rc_players" pkName="pk_rc_players">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="uuid" type="uuid"/>
            <column name="last_name" type="varchar"/>
            <column name="last_joined" type="timestamp"/>
            <column name="first_joined" type="timestamp"/>
        </createTable>
        <createTable name="flight_stations" pkName="pk_flight_stations">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="name" type="varchar" unique="uq_flight_stations_name"/>
            <column name="display_name" type="varchar"/>
            <column name="world" type="varchar"/>
            <column name="x" type="integer" notnull="true"/>
            <column name="y" type="integer" notnull="true"/>
            <column name="z" type="integer" notnull="true"/>
            <column name="cost_multiplier" type="double" notnull="true"/>
            <column name="main_station" type="boolean" defaultValue="false" notnull="true"/>
            <column name="emergency_station" type="boolean" defaultValue="false" notnull="true"/>
            <column name="version" type="bigint" notnull="true"/>
            <column name="when_created" type="timestamp" notnull="true"/>
            <column name="when_modified" type="timestamp" notnull="true"/>
        </createTable>
        <createTable name="rctravel_stations" pkName="pk_rctravel_stations">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="name" type="varchar"/>
            <column name="group_name" type="varchar"/>
            <column name="price" type="integer" notnull="true"/>
            <column name="x" type="integer" notnull="true"/>
            <column name="y" type="integer" notnull="true"/>
            <column name="z" type="integer" notnull="true"/>
            <column name="pitch" type="integer" notnull="true"/>
            <column name="yaw" type="integer" notnull="true"/>
            <column name="world" type="varchar"/>
            <column name="x_min" type="integer" notnull="true"/>
            <column name="y_min" type="integer" notnull="true"/>
            <column name="z_min" type="integer" notnull="true"/>
            <column name="x_max" type="integer" notnull="true"/>
            <column name="y_max" type="integer" notnull="true"/>
            <column name="z_max" type="integer" notnull="true"/>
        </createTable>
        <createTable name="flight_waypoints" pkName="pk_flight_waypoints">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="path_id" type="bigint" references="flight_paths.id"
                    foreignKeyName="fk_flight_waypoints_path_id" foreignKeyIndex="ix_flight_waypoints_path_id"/>
            <column name="waypoint_index" type="integer" notnull="true"/>
            <column name="world" type="varchar"/>
            <column name="x" type="double" notnull="true"/>
            <column name="y" type="double" notnull="true"/>
            <column name="z" type="double" notnull="true"/>
            <column name="version" type="bigint" notnull="true"/>
            <column name="when_created" type="timestamp" notnull="true"/>
            <column name="when_modified" type="timestamp" notnull="true"/>
        </createTable>
    </changeSet>
</migration>